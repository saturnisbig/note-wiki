# Django forms的使用

### [Working with forms](https://docs.djangoproject.com/en/1.9/topics/forms/)

2016-06-28 06:30:16 - 2016-06-28 07:23:18
2016-07-05 06:20:16 - 2016-06-28 07:23:18
2016-07-06 13:30:47 - 2016-07-06 13:57:05
2016-07-07 19:20:06 -

- 通过注册例子来学习表格的应用

[[例子分析]]

[[sigun-form示例代码]]

[[表格校验工作原理]] 2016-07-07 19:43:58 - 2016-07-07 20:00:51

[[view中表单的处理]] 2016-07-07 20:01:47 - 2016-07-07 20:05:47

### [Creating forms from models](https://docs.djangoproject.com/en/1.9/topics/forms/modelforms/)
2016-06-28 20:55:12 -

原理：

示例：

    from django.db import models
    from django.forms import ModelForm

    TITLE_CHOICES = (
        ('MR', 'Mr.'),
        ('MRS', 'Mrs.'),
        ('MS', 'Ms.'),
    )
    class Author(models.Model):
        name = models.CharField(max_length=100)
        title = models.CharField(max_length=3, choices=TITLE_CHOICES)
        birth_date = models.DateField(blank=True, null=True)
        
        def __str__(self):
            return self.name
    class Book(models.Model):
        name = models.CharField(max_legnth=100)
        authors = models.ManyToManyField(Author)
        
    class AuthorForm(ModelForm):
        class Meta:
            model = Author
            fields = ['name', 'title', 'birth_date']
    class BookForm(ModelForm):
        class Meta:
            model = Book
            fields = ['name', 'authors']

上述代码等同于使用forms创建的如下代码（除了`save()`方法有不同外）

    from django import forms
    class AuthorForm(forms.Form):
        name = forms.CharField(max_length=100)
        title = forms.CharField(
            max_length = 3,
            widget = forms.Select(choices=TITLE_CHOICES)
        )
        birth_date = forms.DateField(required=False)
    
    class BookForm(forms.Form):
        name = forms.CharField(max_length=100)
        authors = forms.ModelMultipleChoiceField(queryset=Author.objects.all())
        

注意点：

ModelForm生成的表格中各个项的排列顺序按照他们在Model中定义的顺序，`ManyToManyField`被
放在最后。

如果在model中设置`editable=False`，那么ModelForm创建表格时不会生成该项


